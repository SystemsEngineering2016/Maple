<body>

<div class = "jumbotron">
  <h1 align="center">Create a New Mapping</h1>
  <p align="center"> Use the form below to input the ids of data points from different systems or versions which you would like to map. You can use the 2 tables below the form to identify the ids of the datapoints that you would like to map.</p>
  <br>
  <%= form_for :map, url: map_index_path do |f| %>
    <p align="center">
      <%= f.label :Data_Point_1%>
      <%= f.text_field :mapfrom_id %>
    </p>

    <p align="center">
      <%= f.label :Data_Point_2%>
      <%= f.text_field :mapto_id %>
    </p>
    <br>
    <p align="center">
      <%= f.submit "Create Data Point Mapping"%>
    </p>
  <% end %>
  <br>
      <div class="modal-body row" align = "center">
        <div class="col-md-6">
          <div class="dropdownLeft">
            <p >Choose system 1</p>
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">List of Systems
              <span class="caret"></span></button>
              <ul class="dropdown-menu" id="id1" align="center">
                <% @systems.each do |f| %>
                <li> <%= link_to f.System_Name, show_version_path(f, :myID2 => params[:myID2]) %> </li>

                <% end %>
              </ul>
            </div>
            <br>

              <div class = "hidden" > <%= @matt = Table.where(version_id: params[:myID]) %> </div>

              <table class="table table-hover" align="center" width="80%">
                <br>
                <tr>
                  <th>id</th>
                  <th>Logical Name</th>
                  <th>Short Name</th>
                  <th>Table Name</th>
                  <th>Column Name</th>
                </tr>
                <% @matt.each do |table| %>
                  <tr>
                      <td><%= table.id%></td>
                      <td> <%= best_in_place table, :Logical_Name %> </td>
                      <td> <%= best_in_place table, :Short_Name %> </td>
                      <td> <%= best_in_place table, :Table_Name %> </td>
                      <td> <%= best_in_place table, :Column_Name %> </td>
                  </tr>
                <% end %>
              </table>

              <!-- <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">List of Data Points
                <span class="caret"></span></button>
                <ul class="dropdown-menu" id="id1" align="center">
                  <% @matt.each do |f| %>

                  <li align="center"> <%= f.id%> </li>
                  <% end %>
                </ul> -->
        </div>


        <div class="col-md-6">
          <div class="dropdownRight">
            <p>Choose system 2:</p>
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">List of Systems
            <span class="caret"></span></button>
            <ul class="dropdown-menu" id="id1" align="center">
              <% @systems.each do |f| %>
              <li> <%= link_to f.System_Name,  new_version_path(f, :myID1 => params[:myID]) %> </li>

              <% end %>
            </ul>
          </div>
          <br>
          <div class = "hidden" >  <%= @matt = Table.where(version_id: params[:myID2]) %> </div>

          <table class="table table-hover" align="center" width="80%">
            <br>
            <tr>
              <th>id</th>
              <th>Logical Name</th>
              <th>Short Name</th>
              <th>Table Name</th>
              <th>Column Name</th>

            </tr>
            <% @matt.each do |table| %>
              <tr>
                  <td><%= table.id%></td>
                  <td> <%= best_in_place table, :Logical_Name %> </td>
                  <td> <%= best_in_place table, :Short_Name %> </td>
                  <td> <%= best_in_place table, :Table_Name %> </td>
                  <td> <%= best_in_place table, :Column_Name %> </td>
              </tr>
            <% end %>
          </table>

        </div>

      </div>


</div>

</body>
